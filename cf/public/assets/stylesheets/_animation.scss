// ------------------------------------------------------------
// Animations
// ------------------------------------------------------------


// ------------------------------------------------------------
// Animation Mixins
// ------------------------------------------------------------
@mixin blockFadeScale(){
  transition: $fast opacity linear, $fast transform ease-in;
  opacity: 1;
  transform: scale(1);
}

@mixin textSlide(){
  transition: $slow transform ease-in;
  transition-delay: $fast;
  transform: scaleX(1);
}

@mixin textFade(){
  transition: $fast opacity linear;
  transition-delay: $slower;
  opacity: 1;
}


// Setup Non JS animations
// ------------------------------------------------------------

// Page elements 
.home .site-title,
.home .site-header,
.related-articles,
.site-footer {
  opacity: 0;
}

// Hero
.hero{
  &:before{
    transform: scaleY(1);
    animation: slideAway 900ms forwards 500ms;
  }
  .hero__content p.mag-title,
  .hero__content h1,
  .hero__content p,
  .read-time,
  svg {
    opacity: 0;
    animation: fade 0.3s forwards;
  }
  .hero__content h1{animation-delay: 1s;}
  .hero__content p{animation-delay: 1.6s;}
  .hero__content p.mag-title, .read-time{animation-delay: 2.2s;}
  svg{animation-delay: 0;}
}

// Header
.home .site-title,
.home .site-header {
  animation: fade $fast forwards;
  animation-delay: 2s;
}

// Reveal
.reveal .panel{
  @include mq($from: large){
    opacity: 0;
    animation: fade 1s forwards;
    animation-delay: 2s;
    &:nth-of-type(2){animation-delay: 2.3s;}
    &:nth-of-type(3){animation-delay: 2.6s;}
    &:nth-of-type(4){animation-delay: 2.9s;}
    &:nth-of-type(5){animation-delay: 3.2s;}
  }
}


// ------------------------------------------------------------
// Tablet Only
// ------------------------------------------------------------
@include mq($from: medium){

  // Setup scale / opacity etc etc
  // ------------------------------------------------------------

  // Home
  .home{

    // feature blocks
    .feature{
      img, video{
        opacity: 0;
        transform: scale(0.95);
      }
      .text{
        transform-origin: left;
        transform: scaleX(0);
      }
      &#choices .text{
        transform-origin: right;
      }
      .text-wrap, .read-time {opacity: 0;}
      h2.medium-up{opacity: 0;}
    }
    
    // pull quote full width
    .pull-full{
      opacity: 0;
      transform: scaleY(0);
      transform-origin: top;
      #icon-animated-people{
        opacity: 0;
        transform: translate3d(0,500%,0);
      }
      .inner{opacity: 0;}
    }

    // offset blocks
    .offset-blocks{
      .block{
        transform: scale(0.7);
        opacity: 0;
      }
      a{opacity: 0;}
      
      &.list{
        .block:last-of-type{
          transform: scale(0);
          transform-origin: left;
          a{transition-delay: 2s;}
        }
      }

      .list-item{
        img, video{transform: scale(0.95);opacity: 0;}
        .text{
          transform-origin: left;
          transform: scaleX(0);
          a{opacity: 0;}
        }
        &:nth-of-type(even){
          .text{transform-origin: right;}
        }
      }

    }

    // Rocket
    #icon-animated-rocket{
      transform: translate3d(-50%,50%,0);
      opacity: 0;
    }

    // Solid
    .feature-solid{
      .text{
        transform: scaleX(0);
        transform-origin: right;
        img, video{
          transform: scale(0);
        }
      }
    }

    // Half
    .half{opacity: 0;}

  }


  // List Items
  .list{
    .row{
      .text{
        transform: scaleX(0);
        transform-origin: right;
        h2, p{opacity: 0;}
      }
      .image{
        transform: scale(0.95);
        opacity: 0;
      }
      svg{opacity: 0;}
      &:nth-of-type(even){ 
        .text{transform-origin: left;} 
      }
    }

    &.ten-new-ideas-about-to-change-your-life {
      .row{
        .text{transform-origin: left;}
        &:nth-of-type(even){ 
          .text{transform-origin: right;} 
        }
      }
    }

  }

  // Guide
  .guide{

    @mixin slideSetup() {
      transform: scaleY(0);
      h2, h3, p, div {opacity: 0;}
    }

    @mixin fadeSetup() {
      opacity: 0;
    }

    &.when-can-i-retire{
      .guide--wrapper .row{
        &:nth-child(1) .block{
          &:nth-child(1){@include slideSetup();}
          &:nth-child(2){@include fadeSetup();}
        }
        &:nth-child(2) .block{
          &:nth-child(1){@include fadeSetup();}
          &:nth-child(2){@include slideSetup();}
        }
        &:nth-child(3) .block{
          &:nth-child(1){@include fadeSetup();}
          &:nth-child(2){@include slideSetup();}
        }
      }
    }

    &.the-retirement-of-the-future{
      .guide--wrapper .row{
        &:nth-child(1) .block{
          @include slideSetup();
          div.quart{@include fadeSetup();}
        }
        &:nth-child(2) .block{
          &:nth-child(1){@include fadeSetup();}
          &:nth-child(2){@include slideSetup();}
        }
        &:nth-child(3) .block{
          &:nth-child(1){@include slideSetup();}
          &:nth-child(2){@include fadeSetup();}
        }
      }
    }

  }

  // Timeline
  .time{
    .text{transform: scaleY(0)}
    svg, img, .text p{opacity: 0;}
  }

  .timeline .quote{opacity: 0;}


  // Intro Full width
  .intro {
    transform: scaleY(0);
    p, .bodymovin, strong, h4{opacity: 0;}
  }

  // Longforms
  .long-form {

    .column{
      .text, .infographic, .image {opacity: 0;}
      &.three-col.background--red{
        transform: scaleY(0);
        div, .bodymovin, h1{
          opacity: 0;
        }
      }
    }

    .feature{
      img, .quote{opacity: 0;}
      .text{
        transform: scaleX(0);
        .text-wrap{opacity: 0;}
      }
    }

    .feature-row{
      p, .bodymovin, img {opacity: 0;}
    }

    .text.stat, .feature-solid{opacity: 0;}

    .pull{
      transform: scaleY(0);
      p, .bodymovin, h2{opacity: 0;}
    }

  }


  // ------------------------------------------------------------
  // ------------------------------------------------------------
  // ------------------------------------------------------------
  // Then Animate
  // ------------------------------------------------------------
  // ------------------------------------------------------------
  // ------------------------------------------------------------


  

  // Related / Footer 
  // ------------------------------------------------------------    
  .related-articles.show,
  .site-footer.show {
    opacity: 1;
    transition: opacity $fast linear;
  }

  // Home Row Show
  // ------------------------------------------------------------    
  .home .row.show{

    &.column{
      transition: $slow linear;
      .text{transition: $slow ease-out transform;}
    }

    &.feature{
      img, video{
        @include blockFadeScale();
      }
      .text{
        @include textSlide();
      }
      .text-wrap, h2.medium-up, .read-time{
        @include textFade();
      }
      &.longer .text{transform-origin: right;}
    }
    
    // pull full width
    &.pull-full{
      transition: $slow;
      transform: scaleY(1);
      opacity: 1;
      #icon-animated-people{transition: 2s ease-out;}
      .inner{
        opacity: 1;
        transition: $slow opacity; 
        transition-delay: $slow; 
      }
    }
    

    // offset blocks
    &.offset-blocks{

      // Block Items
      .block{
        transition: transform $fast ease-in, opacity $fast linear, background-size $fast linear;
        transform: scale(1);
        opacity: 1;
        &:last-of-type{
          transition: transform $fast ease-in $fast, opacity $fast linear $fast, background-size $fast linear;
          a{transition-delay: $slower;}
        }
      }
      a{
        transition: opacity $fast $slow;
        opacity: 1;
      }

      // List items
      .list-item{
        img, video{@include blockFadeScale();}
        .text{
          @include textSlide();
          a{@include textFade();}
        }
      }
    }

    // Half
    &.half{
      @include textFade();
    }

    // Animations 
    #icon-animated-people, #icon-animated-rocket{
      opacity: 1;
      transform: translate3d(0,0,0);
      transition: 2s ease-in;
    }

    // Rocket
    #icon-animated-rocket{
      transition: 1s ease-in-out 1s;
    }    

  }

  // Lists
  // ------------------------------------------------------------   
  .list{
    .row.show{
      .image{
        @include blockFadeScale();
      }
      .text{
        @include textSlide();
        h2, p{@include textFade();}
      }
      svg{@include textFade(); transition-delay: $slow;}
    }
  }
 
  // Guide
  // ------------------------------------------------------------   
  .guide{

    @mixin slideShow() {
      transition: transform $slow ease-in;
      transform-origin: top;
      transform: scaleY(1);

      h2, h3, p, div {
        @include fadeShow();
        transition-delay: $slow;
      }
      div{transition-delay: $slower;}

    }

    @mixin fadeShow() {
      transition: opacity $fast linear;
      opacity: 1;
    }

    &.when-can-i-retire {
      .guide--wrapper .row.show{
        &:nth-child(1) .block{
          &:nth-child(1){@include slideShow();}
          &:nth-child(2){@include fadeShow();}
        }
        &:nth-child(2) .block{
          &:nth-child(1){@include fadeShow();}
          &:nth-child(2){@include slideShow();}
        }
        &:nth-child(3) .block{
          &:nth-child(1){@include fadeShow();}
          &:nth-child(2){@include slideShow();}
        }
      }
    }

    &.the-retirement-of-the-future{
      .guide--wrapper .row.show{
        &:nth-child(1) .block{
          @include slideShow();
          div.quart{
            @include fadeShow();
            &:nth-child(2){transition-delay: 0.9s;}
            &:nth-child(3){transition-delay: 1.2s;}
            &:nth-child(4){transition-delay: 1.5s;}
            &:nth-child(5){transition-delay: 1.8s;}
          }
        }
        &:nth-child(2) .block{
          &:nth-child(1){@include fadeShow();}
          &:nth-child(2){@include slideShow();}
        }
        &:nth-child(3) .block{
          &:nth-child(1){@include slideShow();}
          &:nth-child(2){@include fadeShow();}
        }
      }
    }

  }


  // Time
  // ------------------------------------------------------------ 

  .timeline .quote.show{
    transition: opacity $fast linear;
    opacity: 1;
  }

  .time.show{
    .text{
      transition: transform $slow ease-in;
      transform-origin: top;
      transform: scaleY(1);
    }
    svg, img, .text p{
      transition: opacity $fast linear $slower;
      opacity: 1;
    }

    svg[class*=" icon-decade-"]{transition-delay: $slow;}
    .text p{transition-delay: $slower;}
    svg, img {transition-delay: 1.2s;}


    &.thirties,
    &.sixties, {
      .text{
        transition-delay: $slow;
        p{transition-delay: 1.2s;}
      }

    }

    &.forties,
    &.seventies {
      .text{transition-delay: $fast;}   
    }

  }

  // Intro
  // ------------------------------------------------------------ 

  .intro.show{
    transition: transform $slow ease-in;
    transform-origin: top;
    transform: scaleY(1);
    p, .bodymovin, strong, h4{
      transition: opacity $fast linear $slower;
      opacity: 1;
    }
  }


  // Longforms
  // ------------------------------------------------------------ 

  .long-form {
    .column.show{
      .text, .infographic, .image {
        transition: opacity $fast linear $slower;
        opacity: 1;
      }
      &.three-col.background--red{
        transition: transform $slow ease-in;
        transform-origin: top;
        transform: scaleY(1);
        .bodymovin, div, h1 {
          transition: opacity $fast linear $slower;
          opacity: 1;
        }
      }


    }
    .feature.show{
      img, .quote{
        transition: opacity $fast linear;
        opacity: 1;
      }
      .text{
        transition: transform $slow ease-in;
        transform-origin: left;
        transform: scaleX(1);
        .text-wrap{
          transition: opacity $fast linear $slower;
          opacity: 1;
        }
      }
    }

    .feature-row.show{
      p, .bodymovin, img {
        transition: opacity $fast linear;
        opacity: 1;
      }
      p{transition-delay: $slow;}
      .bodymovin{transition-delay: $slower;}
    }

    .text.stat.show,
    .feature-solid.show{
      transition: opacity $fast linear;
      opacity: 1;
    }

    .pull.show{
      transition: transform $slow ease-in;
      transform-origin: top;
      transform: scaleY(1);
      p, .bodymovin, h2{
        transition: opacity $fast linear $slower;
        opacity: 1;
      }
    }
  }

} //eo: mq



// ------------------------------------------------------------
// Animation Keyframes
// ------------------------------------------------------------

// Animation Keyframes
@keyframes fade{
  100%{opacity: 1;}
}

@keyframes slideAway{
  100%{transform: scaleY(0);}
}